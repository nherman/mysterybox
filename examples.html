<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <style type="text/css">
            html {
                height:100%;
            }
            body {
                height:100%;
                margin:0;
                background-color: #eee;
            }
        </style>

        <script src="mysterybox.js"></script>
        <script src="mb_plugins.js"></script>
        <script>
var insertpoint = "<!-- tests -->",
    endpoint = "<!-- /tests -->",
    defaultHTML = "",
    defaultCSS = "",
    tests = {
    "Multi-line": function() {
        var mb = new window.MYSTERYBOX();
        mb.initMsg("                                  _______\n                           _,,ad8888888888bba,_\n                        ,ad88888I888888888888888ba,\n                      ,88888888I88888888888888888888a,\n                    ,d888888888I8888888888888888888888b,\n                   d88888PP\"\"\"\" \"\"YY88888888888888888888b,\n                 ,d88\"'__,,--------,,,,.;ZZZY8888888888888,\n                ,8IIl'\"                ;;l\"ZZZIII8888888888,\n               ,I88l;'                  ;lZZZZZ888III8888888,\n             ,II88Zl;.                  ;llZZZZZ888888I888888,\n            ,II888Zl;.                .;;;;;lllZZZ888888I8888b\n           ,II8888Z;;                 `;;;;;''llZZ8888888I8888,\n           II88888Z;'                        .;lZZZ8888888I888b\n           II88888Z; _,aaa,      .,aaaaa,__.l;llZZZ88888888I888\n           II88888IZZZZZZZZZ,  .ZZZZZZZZZZZZZZ;llZZ88888888I888,\n           II88888IZZ<'(@@>Z|  |ZZZ<'(@@>ZZZZ;;llZZ888888888I88I\n          ,II88888;   `\"\"\" ;|  |ZZ; `\"\"\"     ;;llZ8888888888I888\n          II888888l            `;;          .;llZZ8888888888I888,\n         ,II888888Z;           ;;;        .;;llZZZ8888888888I888I\n         III888888Zl;    ..,   `;;       ,;;lllZZZ88888888888I888\n         II88888888Z;;...;(_    _)      ,;;;llZZZZ88888888888I888,\n         II88888888Zl;;;;;' `--'Z;.   .,;;;;llZZZZ88888888888I888b\n         ]I888888888Z;;;;'   \";llllll;..;;;lllZZZZ88888888888I8888,\n         II888888888Zl.;;\"Y88bd888P\";;,..;lllZZZZZ88888888888I8888I\n         II8888888888Zl;.; `\"PPP\";;;,..;lllZZZZZZZ88888888888I88888\n         II888888888888Zl;;. `;;;l;;;;lllZZZZZZZZW88888888888I88888\n         `II8888888888888Zl;.    ,;;lllZZZZZZZZWMZ88888888888I88888\n          II8888888888888888ZbaalllZZZZZZZZZWWMZZZ8888888888I888888,\n          `II88888888888888888b\"WWZZZZZWWWMMZZZZZZI888888888I888888b\n           `II88888888888888888;ZZMMMMMMZZZZZZZZllI888888888I8888888\n            `II8888888888888888 `;lZZZZZZZZZZZlllll888888888I8888888,\n             II8888888888888888, `;lllZZZZllllll;;.Y88888888I8888888b,\n            ,II8888888888888888b   .;;lllllll;;;.;..88888888I88888888b,\n            II888888888888888PZI;.  .`;;;.;;;..; ...88888888I8888888888,\n            II888888888888PZ;;';;.   ;. .;.  .;. .. Y8888888I88888888888b,\n           ,II888888888PZ;;'                        `8888888I8888888888888b,\n           II888888888'                              888888I8888888888888888b\n          ,II888888888                              ,888888I88888888888888888\n         ,d88888888888                              d888888I8888888888ZZZZZZZ\n      ,ad888888888888I                              8888888I8888ZZZZZZZZZZZZZ\n    ,d888888888888888'                              888888IZZZZZZZZZZZZZZZZZZ\n  ,d888888888888P'8P'                               Y888ZZZZZZZZZZZZZZZZZZZZZ\n ,8888888888888,  \"                                 ,ZZZZZZZZZZZZZZZZZZZZZZZZ\nd888888888888888,                                ,ZZZZZZZZZZZZZZZZZZZZZZZZZZZ\n888888888888888888a,      _                    ,ZZZZZZZZZZZZZZZZZZZZ888888888\n888888888888888888888ba,_d'                  ,ZZZZZZZZZZZZZZZZZ88888888888888\n8888888888888888888888888888bbbaaa,,,______,ZZZZZZZZZZZZZZZ888888888888888888\n88888888888888888888888888888888888888888ZZZZZZZZZZZZZZZ888888888888888888888\n8888888888888888888888888888888888888888ZZZZZZZZZZZZZZ88888888888888888888888\n888888888888888888888888888888888888888ZZZZZZZZZZZZZZ888888888888888888888888\n8888888888888888888888888888888888888ZZZZZZZZZZZZZZ88888888888888888888888888\n88888888888888888888888888888888888ZZZZZZZZZZZZZZ8888888888888888888888888888\n8888888888888888888888888888888888ZZZZZZZZZZZZZZ88888888888888888 Normand  88\n88888888888888888888888888888888ZZZZZZZZZZZZZZ8888888888888888888 Veilleux 88\n8888888888888888888888888888888ZZZZZZZZZZZZZZ88888888888888888888888888888888", true);
        mb.initRandom();
        mb.resolveByColumn({
            "callbackDelayMilliseconds": 2000,
            "callback": function() {
                mb.dissolve({
                    "callbackDelayMilliseconds": 1000,
                    "callback": function() {
                         resetTests();
                    }
                });
            }
        });
    },
    "Basic": function() {
        var mb = new window.MYSTERYBOX({
            "message": "Some are sad and some are glad and some are very, very bad. Why are they sad and glad and bad? I do not know. Go ask your dad."
        });
        mb.initRandom();
        mb.resolve({
            "callbackDelayMilliseconds": 2000,
            "callback": function() {
                mb.dissolve({
                    "callbackDelayMilliseconds": 1000,
                    "callback": function() {
                         mb.renderMsg();
                         resetTests();
                    }
                });
            }
        });
    },
    "Falling Rain": function() {
        var mb = new window.MYSTERYBOX({
            "message": "Why are they sad and glad and bad? I do not know. Go ask your dad."
        });
        mb.initRandom();
        mb.resolveByColumn({
            "threads": 5,
            "intervalMilliseconds": 50,
            "callbackDelayMilliseconds": 2000,
            "callback": function() {
                mb.dissolve({
                    "callback": function() {
                        resetTests();
                    }
                });
            }
        });
    }
};

function startTest(testName) {
    tests[testName]();
    return false;
}

function resetTests(m) {
    m = m || 2000;
    setTimeout(writeTests,m);
}

function writeTests() {
    var body = document.getElementsByTagName("body")[0],
        html = body.innerHTML,
        cursor = "",
        insert = function(text,offset) {
            offset = offset || 0;
            html = html.substring(0,cursor) + text + html.substring(cursor+offset);
        },
        template = '<a href="#" class="list-group-item" data-test="%1" onclick="startTest(\'%1\');">%1<pre>    %2</pre></a>';

    /* store markup on load. otherwise, reset markup */
    if (defaultHTML == "") {
        defaultHTML = html;
        defaultCSS = body.style.cssText;
    } else {
        html = defaultHTML;
        body.style.cssText = defaultCSS;
    }

    /* find insertion point */
    cursor = html.indexOf(insertpoint)+insertpoint.length;

    /* write list of tests */
    for (test in tests){
        if (tests.hasOwnProperty(test)) {
            insert(template.replace(/%1/g,test).replace(/%2/,tests[test].toString()));
        }
    }

    /* update DOM */
    body.innerHTML = html;
}

window.onload = function() {
    writeTests();
}

        </script>
    <body>
        <div class="container">
            <h1>mysterybox examples</h1>
            <div class="list-group">
            <!-- tests -->
            <!-- /tests -->
            </div>
        </div>
    </body>
</html>